#!/usr/bin/env python3
"""
Sample data initialization for BolashakChat AI Agent System
Инициализация примерных данных для системы ИИ-агентов BolashakChat
"""

import app
from app import app

def init_sample_data():
    """Initialize sample data for demonstration"""
    with app.app_context():
        from models import (
            AdminUser, AgentKnowledgeBase, Category, FAQ
        )
        from app import db
        
        print("Initializing sample data...")
        
        # Create admin user if doesn't exist
        admin = AdminUser.query.filter_by(username='admin').first()
        if not admin:
            admin = AdminUser(
                username='admin',
                email='admin@bolashak.edu.kz'
            )
            admin.set_password('admin123')  # Change this in production!
            db.session.add(admin)
            db.session.commit()
            print("✓ Created admin user (admin:admin123)")
        
        # Create sample categories
        categories_data = [
            {
                'name_ru': 'Поступление',
                'name_kz': 'Түсу',
                'description_ru': 'Вопросы о поступлении в университет',
                'description_kz': 'Университетке түсу туралы сұрақтар'
            },
            {
                'name_ru': 'Учебный процесс',
                'name_kz': 'Оқу процесі',
                'description_ru': 'Академические вопросы и расписание',
                'description_kz': 'Академиялық сұрақтар мен кесте'
            },
            {
                'name_ru': 'Студенческая жизнь',
                'name_kz': 'Студенттік өмір',
                'description_ru': 'Внеучебная деятельность и сервисы',
                'description_kz': 'Оқудан тыс қызмет және сервистер'
            }
        ]
        
        for cat_data in categories_data:
            existing = Category.query.filter_by(name_ru=cat_data['name_ru']).first()
            if not existing:
                category = Category(**cat_data)
                db.session.add(category)
        
        db.session.commit()
        print("✓ Created sample categories")
        
        # Create agent-specific knowledge base entries
        agent_knowledge_data = [
            # AI Assistant Agent Knowledge
            {
                'agent_type': 'ai_assistant',
                'title': 'Общая информация об университете',
                'content_ru': '''Кызылординский университет "Болашак" - современное высшее учебное заведение, основанное в 1998 году. 

**Основные факты:**
- Расположен в г. Кызылорда, Казахстан
- Более 5000 студентов
- 12 факультетов
- Обучение на казахском, русском и английском языках
- Аккредитация Министерства образования РК

**Контакты:**
- Телефон: +7 (7242) 123-456
- Email: info@bolashak.edu.kz
- Адрес: ул. Ади Шарипов, 1, Кызылорда''',
                'content_kz': '''Қызылорда "Болашақ" университеті - 1998 жылы құрылған заманауи жоғары оқу орны.

**Негізгі деректер:**
- Қызылорда қаласында орналасқан
- 5000-нан астам студент
- 12 факультет
- Қазақ, орыс және ағылшын тілдерінде оқыту
- ҚР Білім министрлігінің аккредитациясы

**Байланыс:**
- Телефон: +7 (7242) 123-456
- Email: info@bolashak.edu.kz
- Мекенжай: Әди Шәріпов көшесі, 1, Қызылорда''',
                'keywords': 'университет, контакты, информация, общее',
                'priority': 1
            },
            {
                'agent_type': 'ai_assistant',
                'title': 'Расписание занятий',
                'content_ru': '''**Учебное расписание:**

**Время занятий:**
- 1 пара: 08:00-09:30
- 2 пара: 09:40-11:10
- 3 пара: 11:20-12:50
- 4 пара: 14:00-15:30
- 5 пара: 15:40-17:10

**Где найти расписание:**
- Сайт университета: bolashak.edu.kz
- Мобильное приложение "Болашак"
- Доска объявлений факультета
- Telegram-бот @BolashakScheduleBot''',
                'content_kz': '''**Оқу кестесі:**

**Сабақ уақыты:**
- 1 жұп: 08:00-09:30
- 2 жұп: 09:40-11:10
- 3 жұп: 11:20-12:50
- 4 жұп: 14:00-15:30
- 5 жұп: 15:40-17:10

**Кестені қайдан табуға болады:**
- Университет сайты: bolashak.edu.kz
- "Болашақ" мобильді қосымшасы
- Факультет хабарландыру тақтасы
- Telegram-бот @BolashakScheduleBot''',
                'keywords': 'расписание, время, занятия, пары',
                'priority': 2
            },
            # Student Navigator Agent Knowledge
            {
                'agent_type': 'student_navigator',
                'title': 'Получение справок и документов',
                'content_ru': '''**Справки для студентов:**

**Справка об обучении:**
- Подача заявления в деканат
- Срок изготовления: 3 рабочих дня
- Стоимость: бесплатно

**Справка о доходах:**
- Для стипендиатов
- Подача в бухгалтерию
- Срок: 1 рабочий день

**Академическая справка:**
- При переводе или отчислении
- Подача в учебную часть
- Срок: 5 рабочих дней

**Необходимые документы:**
- Заявление
- Студенческий билет
- Копия удостоверения личности''',
                'content_kz': '''**Студенттерге арналған анықтамалар:**

**Оқу туралы анықтама:**
- Деканатқа өтініш беру
- Дайындау мерзімі: 3 жұмыс күні
- Бағасы: тегін

**Табыс туралы анықтама:**
- Шәкіртақы алушыларға
- Бухгалтерияға өтініш
- Мерзімі: 1 жұмыс күні

**Академиялық анықтама:**
- Ауысу немесе шығару кезінде
- Оқу бөліміне өтініш
- Мерзімі: 5 жұмыс күні

**Қажетті құжаттар:**
- Өтініш
- Студенттік билет
- Жеке куәліктің көшірмесі''',
                'keywords': 'справки, документы, деканат, заявление',
                'priority': 1
            },
            # Career Navigator Agent Knowledge
            {
                'agent_type': 'ai_navigator',
                'title': 'Карьерные возможности',
                'content_ru': '''**Центр карьеры университета:**

**Услуги:**
- Консультации по выбору профессии
- Помощь в составлении резюме
- Тренинги по собеседованию
- Информация о вакансиях

**Партнеры-работодатели:**
- АО "КазМунайГаз"
- ТОО "Кызылорда Газ"
- Областная больница
- IT-компании региона

**Контакты центра карьеры:**
- Кабинет 205, главный корпус
- Телефон: +7 (7242) 123-457
- Email: career@bolashak.edu.kz
- График: Пн-Пт 9:00-18:00''',
                'content_kz': '''**Университеттің мансап орталығы:**

**Қызметтер:**
- Мамандық таңдау бойынша кеңес
- Резюме жасауға көмек
- Сұхбат дайындық тренингтері
- Бос жұмыс орындары туралы ақпарат

**Серіктес жұмыс берушілер:**
- "ҚазМұнайГаз" АҚ
- "Қызылорда Газ" ЖШС
- Облыстық ауруханасы
- Өңірдің IT-компаниялары

**Мансап орталығының байланысы:**
- 205 кабинет, басты корпус
- Телефон: +7 (7242) 123-457
- Email: career@bolashak.edu.kz
- Кесте: Дс-Жм 9:00-18:00''',
                'keywords': 'карьера, работа, резюме, трудоустройство',
                'priority': 1
            },
            # Green Navigator Agent Knowledge
            {
                'agent_type': 'green_navigator',
                'title': 'Программы стажировок',
                'content_ru': '''**Стажировки для студентов:**

**Летние стажировки:**
- Период: июнь-август
- Продолжительность: 4-8 недель
- Оплачиваемые позиции
- Возможность трудоустройства

**Международные программы:**
- Erasmus+ (Европа)
- Обмен с университетами США
- Стажировки в Турции, ОАЭ

**Как подать заявку:**
1. Подготовить документы
2. Пройти собеседование
3. Получить рекомендацию от преподавателя
4. Подать заявку до 1 марта

**Поддержка:**
- Консультации куратора
- Помощь с документами
- Подготовка к собеседованию''',
                'content_kz': '''**Студенттерге арналған тәжірибе:**

**Жазғы тәжірибе:**
- Кезеңі: маусым-тамыз
- Ұзақтығы: 4-8 апта
- Ақылы лауазымдар
- Жұмысқа орналасу мүмкіндігі

**Халықаралық бағдарламалар:**
- Erasmus+ (Еуропа)
- АҚШ университеттерімен алмасу
- Түркия, БАӘ-дегі тәжірибе

**Қалай өтініш беруге болады:**
1. Құжаттарды дайындау
2. Сұхбаттан өту
3. Оқытушыдан ұсыным алу
4. 1 наурызға дейін өтініш беру

**Қолдау:**
- Куратордың кеңесі
- Құжаттармен көмек
- Сұхбатқа дайындық''',
                'keywords': 'стажировка, практика, международный, заявка',
                'priority': 1
            },
            # Communication Agent Knowledge
            {
                'agent_type': 'communication',
                'title': 'Обратная связь и жалобы',
                'content_ru': '''**Система обратной связи:**

**Способы обращения:**
- Личный прием ректора: Пт 15:00-17:00
- Email: feedback@bolashak.edu.kz
- Телефон горячей линии: +7 (7242) 123-458
- Ящик предложений (главный корпус)

**Виды обращений:**
- Жалобы на качество обучения
- Предложения по улучшению
- Конфликтные ситуации
- Вопросы по общежитию

**Сроки рассмотрения:**
- Жалобы: до 10 рабочих дней
- Предложения: до 15 рабочих дней
- Срочные вопросы: в течение дня

**Гарантия конфиденциальности:**
Все обращения рассматриваются конфиденциально''',
                'content_kz': '''**Кері байланыс жүйесі:**

**Өтініш беру тәсілдері:**
- Ректордың жеке қабылдауы: Жм 15:00-17:00
- Email: feedback@bolashak.edu.kz
- Ыстық желі телефоны: +7 (7242) 123-458
- Ұсыныстар жәшігі (басты корпус)

**Өтініш түрлері:**
- Оқыту сапасына шағымдар
- Жақсарту ұсыныстары
- Қақтығыс жағдайлары
- Жатақхана мәселелері

**Қарау мерзімдері:**
- Шағымдар: 10 жұмыс күніне дейін
- Ұсыныстар: 15 жұмыс күніне дейін
- Шұғыл мәселелер: күн ішінде

**Құпиялылық кепілдігі:**
Барлық өтініштер құпия түрде қаралады''',
                'keywords': 'жалобы, обратная связь, предложения, конфиденциально',
                'priority': 1
            }
        ]
        
        for kb_data in agent_knowledge_data:
            existing = AgentKnowledgeBase.query.filter_by(
                agent_type=kb_data['agent_type'],
                title=kb_data['title']
            ).first()
            
            if not existing:
                kb_entry = AgentKnowledgeBase(
                    created_by=admin.id,
                    **kb_data
                )
                db.session.add(kb_entry)
        
        db.session.commit()
        print("✓ Created agent knowledge base entries")
        
        # Create sample FAQs
        categories = {cat.name_ru: cat.id for cat in Category.query.all()}
        
        faq_data = [
            {
                'question_ru': 'Как поступить в университет?',
                'question_kz': 'Университетке қалай түсуге болады?',
                'answer_ru': 'Для поступления необходимо подать документы до 15 августа, сдать ЕНТ и пройти конкурсный отбор.',
                'answer_kz': 'Түсу үшін 15 тамызға дейін құжаттар беру, ҰБТ тапсыру және конкурстық іріктеуден өту қажет.',
                'category_id': categories.get('Поступление')
            },
            {
                'question_ru': 'Где посмотреть расписание?',
                'question_kz': 'Кестені қайдан көруге болады?',
                'answer_ru': 'Расписание доступно на сайте университета, в мобильном приложении и на досках объявлений факультетов.',
                'answer_kz': 'Кесте университет сайтында, мобильді қосымшада және факультет хабарландыру тақталарында қол жетімді.',
                'category_id': categories.get('Учебный процесс')
            }
        ]
        
        for faq_data_item in faq_data:
            if faq_data_item['category_id']:
                existing = FAQ.query.filter_by(question_ru=faq_data_item['question_ru']).first()
                if not existing:
                    faq = FAQ(**faq_data_item)
                    db.session.add(faq)
        
        db.session.commit()
        print("✓ Created sample FAQs")
        
        print("\n🎉 Sample data initialization completed!")
        print("\nAdmin credentials:")
        print("Username: admin")
        print("Password: admin123")
        print("\nYou can now:")
        print("- Access admin panel at /admin")
        print("- Manage agent knowledge bases")
        print("- View analytics and ratings")
        print("- Test the chat system")

if __name__ == '__main__':
    init_sample_data()